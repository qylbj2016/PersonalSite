webpackJsonp([2],{"/ayB":function(n,t,e){"use strict";var o=e("Dd8w"),i=e.n(o),m=e("ickt"),s=e("jFLA"),r={render:function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"comment-item"},[e("div",{staticClass:"info"},[e("img",{attrs:{src:n.comment.user_img}}),n._v(" "),e("div",{staticClass:"info-detils"},[e("div",{staticClass:"name"},[n._v("\n        "+n._s(n.comment.user_name)+"\n        "),n.comment.parent>0?e("div",{staticClass:"reply"},[n._v("回复"+n._s(n.comment.parent_name))]):n._e()]),n._v(" "),e("div",{staticClass:"time"},[e("span",[n._v("发表于")]),n._v("\n        "+n._s(n.comment.ctime)+"\n      ")])])]),n._v(" "),e("div",{staticClass:"text"},[n._v(n._s(n.comment.comment))]),n._v(" "),e("div",{staticClass:"reply-wrapper"},[e("div",{staticClass:"btn",on:{click:n.replay}},[e("a",{attrs:{href:"#write"}},[n._v("回复")])])])])},staticRenderFns:[]};var a=e("VU/8")({props:["comment"],methods:{replay:function(){this.$emit("getInfo",this.comment)}}},r,!1,function(n){e("cs96")},null,null).exports,c=e("SJI6"),d=e("uPtB");var h={components:{pageTurner:m.a,userAlert:s.a,commentItem:a},props:{blogId:Number},data:function(){return{parent:0,parentName:"cinco",content:"",curIndex:0,comments:[],pComments:[],curComments:[],cComments:[]}},computed:i()({dataLen:function(){return this.pComments.length}},Object(c.mapState)({curStatus:function(n){return n.status},name:function(n){return n.userName},email:function(n){return n.userEmail},imgSrc:function(n){return n.userImg}})),watch:{curIndex:function(){this.getCurComments()},blogId:function(n){this.getComments(n).catch(function(n){console.log(n)})}},methods:i()({},Object(c.mapMutations)(["changeStatus"]),{getCurIndex:function(n){this.curIndex=n},getCurComments:function(){var n=6*(this.curIndex-1),t=6*this.curIndex;this.curComments=this.pComments.slice(n,t)},getComments:function(n){var t=this;return n||(n=0),this.axios({method:"GET",url:"http://localhost:8081/getComments?bid="+n}).then(function(n){t.comments=n.data,t.pComments=t.comments.filter(function(n){return 0===n.parent}),t.filterComments()})},getInfo:function(n){this.parent=0===n.parent?n.comment_id:n.parent,this.parentName=n.user_name},changeToMe:function(){this.parentName="cinco",this.parent=0},logout:function(){alert("您确认要注销吗？"),this.changeStatus(0)},sendComment:function(){var n=this,t=Object(d.a)([{k:this.content,v:"评论内容"}]);!0===t&&1===this.curStatus?this.axios({method:"POST",url:"http://localhost:8081/sendComment",data:{blog_id:this.blogId,user_name:this.name,email:this.email,comment:this.content,parent:this.parent,parent_name:this.parentName,comment_id:this.dataLen+1,ctime:(new Date).toLocaleString(),user_img:this.imgSrc}}).then(function(t){t.data?(n.parent=0,n.parentName="cinco",n.getComments(n.blogId).then(function(){(n.dataLen%6!=1||1===n.dataLen)&&n.getCurComments()}).then(function(){return alert("评论成功")})):alert("评论失败")}):0===this.curStatus?alert("请您先登陆再评论"):alert(t)},checkEmail:function(){this.axios({method:"post",url:"http://www.cinco.site:8081/checkVisitor",data:{email:this.email}}).then(function(n){alert(n.data)})},filterComments:function(){var n=this;this.pComments.forEach(function(t){n.cComments[t.comment_id]=[]}),this.comments.forEach(function(t){0!==t.parent&&n.cComments[t.parent].push(t)})}}),created:function(){var n=this;this.getComments(this.blogId).then(function(){n.getCurIndex(1)})}},l={render:function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"comment-body"},[e("div",{staticClass:"show-comments"},[0===n.curComments.length&&0!==n.blogId?e("div",{staticClass:"show-tip"},[n._v("该文章目前还没有评论，快来抢沙发吧~")]):n._e(),n._v(" "),n._l(n.curComments,function(t,o){return e("div",{key:t+o,staticClass:"show-item"},[e("comment-item",{attrs:{comment:t},on:{getInfo:n.getInfo}}),n._v(" "),n._l(n.cComments[t.comment_id],function(t,o){return e("comment-item",{key:t+o,staticClass:"c-items",attrs:{comment:t},on:{getInfo:n.getInfo}})})],2)}),n._v(" "),e("page-turner",{attrs:{dataLen:n.dataLen,limit:6},on:{getCurIndex:n.getCurIndex}})],2),n._v(" "),e("div",{staticClass:"write-comments",attrs:{id:"write"}},[e("div",{staticClass:"reply"},[n._v("\n      to: "+n._s(n.parentName)+"\n      "),"cinco"!==n.parentName?e("span",{staticClass:"toMe",on:{click:n.changeToMe}},[n._v("给Cinco留言")]):n._e()]),n._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:n.content,expression:"content"}],attrs:{placeholder:"登陆后才可以评论哟"},domProps:{value:n.content},on:{input:function(t){t.target.composing||(n.content=t.target.value)}}}),n._v(" "),e("div",{staticClass:"btns"},[1!==n.curStatus?e("div",{on:{click:function(t){return n.changeStatus(2)}}},[n._v("登陆")]):n._e(),n._v(" "),0!==n.curStatus?e("div",{on:{click:n.logout}},[n._v("注销")]):n._e(),n._v(" "),e("div",{on:{click:n.sendComment}},[n._v("发表评论")])])])])},staticRenderFns:[]};var p=e("VU/8")(h,l,!1,function(n){e("71z7")},null,null);t.a=p.exports},"2YBO":function(n,t,e){(n.exports=e("FZ+f")(!1)).push([n.i,"\n.comment-body {\n  width: 100%;\n  margin-bottom: 5rem;\n}\n.comment-body .show-comments {\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n    width: 100%;\n    padding: 1.5rem;\n}\n@media screen and (max-width: 1100px) {\n.comment-body .show-comments {\n        padding: 1.5rem 0;\n}\n}\n.comment-body .show-comments .show-item {\n      -webkit-box-sizing: border-box;\n              box-sizing: border-box;\n      margin: 0 auto;\n      width: 90%;\n}\n.comment-body .show-comments .show-item .comment-item {\n        margin-bottom: 2rem;\n}\n.comment-body .show-comments .show-item .comment-item .info {\n          width: 100%;\n          display: -webkit-box;\n          display: -ms-flexbox;\n          display: flex;\n}\n.comment-body .show-comments .show-item .comment-item .info img {\n            width: 4rem;\n            height: 4rem;\n            border-radius: 50%;\n            font-size: 1rem;\n}\n.comment-body .show-comments .show-item .comment-item .info .info-detils .name {\n            height: 2rem;\n            padding: 0 .5rem;\n            font-size: 1rem;\n            line-height: 2rem;\n            white-space: nowrap;\n            text-overflow: ellipsis;\n            overflow: hidden;\n            display: -webkit-box;\n            display: -ms-flexbox;\n            display: flex;\n}\n.comment-body .show-comments .show-item .comment-item .info .info-detils .name .reply {\n              color: #BBB;\n              margin-left: 1rem;\n}\n@media screen and (max-width: 350px) {\n.comment-body .show-comments .show-item .comment-item .info .info-detils .name {\n                font-size: .8rem;\n}\n}\n.comment-body .show-comments .show-item .comment-item .info .info-detils .time {\n            height: 2rem;\n            padding: 0 .5rem;\n            font-size: 1rem;\n            color: #AAA;\n}\n@media screen and (max-width: 500px) {\n.comment-body .show-comments .show-item .comment-item .info .info-detils .time span {\n                display: none;\n}\n}\n@media screen and (max-width: 350px) {\n.comment-body .show-comments .show-item .comment-item .info .info-detils .time {\n                font-size: .8rem;\n}\n}\n.comment-body .show-comments .show-item .comment-item .text {\n          width: 100%;\n          -webkit-box-sizing: border-box;\n                  box-sizing: border-box;\n          padding: 1rem 1rem .5rem;\n          font-size: 1rem;\n          line-height: 2rem;\n          word-wrap: break-word;\n          border-bottom: 1px dotted #AAA;\n}\n.comment-body .show-comments .show-item .comment-item .reply-wrapper {\n          width: 100%;\n          text-align: right;\n          margin-top: -2.3rem;\n}\n.comment-body .show-comments .show-item .comment-item .reply-wrapper .btn {\n            display: inline-block;\n            width: 3rem;\n            background: linear-gradient(45deg, #E0EAFC, #CFDEF3);\n            border-radius: 4px;\n            color: #000;\n            line-height: 1.5rem;\n            text-align: center;\n            height: 1.5rem;\n            font-size: .8rem;\n            cursor: pointer;\n}\n.comment-body .show-comments .show-item .c-items {\n        padding-left: 10%;\n        margin-bottom: 1.5rem;\n}\n.comment-body .show-comments .show-item .c-items .info img {\n          width: 2.5rem;\n          height: 2.5rem;\n          font-size: .6rem;\n}\n.comment-body .show-comments .show-item .c-items .info .info-detils .name {\n          height: 1.5rem;\n          margin-top: -0.5rem;\n          font-size: .8rem;\n}\n.comment-body .show-comments .show-item .c-items .info .info-detils .time {\n          height: 1.5rem;\n          font-size: .8rem;\n}\n.comment-body .show-comments .show-item .c-items .text {\n          padding: 1rem .5rem;\n          font-size: .8rem;\n          line-height: .8rem;\n          word-wrap: break-word;\n}\n.comment-body .show-comments .show-item .c-items .reply-wrapper .btn {\n          width: 2.5rem;\n          line-height: 1.2rem;\n          height: 1.2rem;\n}\n.comment-body .write-comments {\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n    padding: 1rem;\n    width: 90%;\n    margin: 0 auto 2rem;\n    position: relative;\n}\n@media screen and (max-width: 414px) {\n.comment-body .write-comments {\n        width: 100%;\n}\n}\n.comment-body .write-comments .reply {\n      margin-bottom: 1.5rem;\n      font-size: 1rem;\n}\n.comment-body .write-comments .reply .toMe {\n        font-size: 1rem;\n        margin-left: 3rem;\n        font-size: 1rem;\n        font-weight: 500;\n        background: linear-gradient(45deg, #E0EAFC, #CFDEF3);\n        cursor: pointer;\n}\n.comment-body .write-comments textarea {\n      -webkit-box-sizing: border-box;\n              box-sizing: border-box;\n      width: 100%;\n      margin: 0 auto;\n      height: 150px;\n      border-radius: 4px;\n      padding: 1rem;\n      resize: none;\n}\n.comment-body .write-comments .btns {\n      position: absolute;\n      right: 2rem;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      padding-top: 1.5rem;\n      height: 4rem;\n      width: 12rem;\n      -webkit-box-pack: justify;\n          -ms-flex-pack: justify;\n              justify-content: space-between;\n}\n.comment-body .write-comments .btns div {\n        font-size: 1rem;\n        line-height: 2rem;\n        font-size: 1rem;\n        height: 2rem;\n        text-align: center;\n        border-radius: 4px;\n        cursor: pointer;\n        background: linear-gradient(45deg, #E0EAFC, #CFDEF3);\n}\n.comment-body .write-comments .btns div:nth-of-type(1) {\n          width: 3rem;\n}\n.comment-body .write-comments .btns div:nth-of-type(2) {\n          width: 6rem;\n}\n",""])},"2bSx":function(n,t,e){(n.exports=e("FZ+f")(!1)).push([n.i,"\n.comment-wrapper {\n  width: 80%;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  margin-left: 10%;\n  margin-top: 1rem;\n  border: 1px solid #000;\n  border-radius: 4px;\n  padding: 2rem;\n}\n@media screen and (max-width: 414px) {\n.comment-wrapper {\n      padding: 2rem 0;\n}\n}\n.comment-wrapper .comment-top {\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n    width: 90%;\n    margin: 0 auto;\n}\n.comment-wrapper .comment-top .title {\n      margin-bottom: 2rem;\n      text-align: center;\n      font-size: 1.5rem;\n}\n.comment-wrapper .comment-top img {\n      width: 100%;\n      height: 100%;\n      border-radius: 2px;\n}\n",""])},"71z7":function(n,t,e){var o=e("2YBO");"string"==typeof o&&(o=[[n.i,o,""]]),o.locals&&(n.exports=o.locals);e("rjj0")("f49ff826",o,!0,{})},"YA+j":function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={components:{comment:e("/ayB").a},data:function(){return{blogId:0}}},i={render:function(){var n=this.$createElement,t=this._self._c||n;return t("div",{staticClass:"comment-wrapper"},[this._m(0),this._v(" "),t("comment",{attrs:{blogId:this.blogId}})],1)},staticRenderFns:[function(){var n=this.$createElement,t=this._self._c||n;return t("div",{staticClass:"comment-top"},[t("div",{staticClass:"title"},[this._v("留言")]),this._v(" "),t("img",{attrs:{src:"/static/images/comment.jpg"}})])}]};var m=e("VU/8")(o,i,!1,function(n){e("fNHB")},null,null);t.default=m.exports},cs96:function(n,t,e){var o=e("hW4R");"string"==typeof o&&(o=[[n.i,o,""]]),o.locals&&(n.exports=o.locals);e("rjj0")("2340093f",o,!0,{})},fNHB:function(n,t,e){var o=e("2bSx");"string"==typeof o&&(o=[[n.i,o,""]]),o.locals&&(n.exports=o.locals);e("rjj0")("256011c1",o,!0,{})},hW4R:function(n,t,e){(n.exports=e("FZ+f")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])}});